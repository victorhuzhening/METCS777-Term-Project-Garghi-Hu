# Required: pip version <= 24

numpy==1.26.4
mediapipe
pyarrow

# PyTorch (CPU) + vision
torch==2.1.0+cpu
torchvision==0.16.0+cpu
# torchtext

# OpenCV compatible with NumPy 1.x
opencv-python==4.10.0.84

# OpenMMLab installer for MMPose models
openmim==0.3.9

# ANCIENT dependencies we need before installing MMPose dependencies
# Run pip install "package=version"
chumpy==0.70
xtcocotools==1.14.3
pycocotools==2.0.10
cython==3.2.1
shapely==2.1.2
terminaltables==3.1.10
json-tricks==3.17.3
munkres==1.1.4

# Core dependencies for MMPose models
# Run mim install "package=version"
mmengine==0.10.7
mmcv==2.1.0
mmdet==3.2.0
mmpose==1.3.2

# Package install scripts:
# Create a fresh env with Python 3.10
conda create -n MMPoseGood python=3.10 -y

# Activate it
conda activate MMPoseGood

# 1. Make pip compatible with old build systems (and satisfy <= 25.3.2)
python -m pip install --upgrade "pip<24"
python -m pip install --upgrade setuptools wheel

# 2. Core required libraries
pip install numpy==1.26.4
pip install mediapipe pyarrow

# 3. PyTorch CPU stack
pip install torch==2.1.0+cpu torchvision==0.16.0+cpu --index-url https://download.pytorch.org/whl/cpu

# 4. OpenCV compatible with NumPy 1.x
pip install opencv-python==4.10.0.84

# 5. OpenMMLab installer
pip install openmim==0.3.9

# chumpy has annoying build isolation issues â†’ disable it explicitly
python -m pip install chumpy==0.70 --no-build-isolation

# Other low-level deps (COCO tooling etc.)
pip install \
    xtcocotools==1.14.3 \
    pycocotools==2.0.10 \
    cython==3.2.1 \
    shapely==2.1.2 \
    terminaltables==3.1.10 \
    json-tricks==3.17.3 \
    munkres==1.1.4
# Make sure we're still in the MMPoseGood env
conda activate MMPoseGood

# Core runtime lib
mim install "mmengine==0.10.7"

# Computer vision core
mim install "mmcv==2.1.0"

# Detection (for some pose models)
mim install "mmdet==3.2.0"

# Finally, MMPose itself
mim install "mmpose==1.3.2"

